<div *ngIf="selected_country != 'saudi'" class="alaqaar-blogs" [ngClass]="{'rtl' : activeLang.title === 'ar' || activeLang === 'ar'}">
    <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="rgba(0, 0, 0, 0.0)"   [fullScreen]="true">
        <img class="spinner-img" style='animation:flip-with-scale 3s infinite;position: relative;top:-100px;' src='../../assets/images/logo-loader.png'/>
        
    </ngx-spinner>
    <div class="row justify-content-center" style="margin: 25px 10px 0px 10px;">
        <div class="col-xs-12 col-sm-10">
            <div style="display:flex;" class="breadcrumb">
                <div class="col-md-10 col-xs-12 bg-head">
                    <p class="main-title">{{'search.title' | translate}} <span>({{total_search_count}} {{'search.count' | translate}})</span></p>
                    <div class="head">
                        <p> <span style="color: #ABABB6;cursor: pointer;"> <span class="home-tab"
                                    [routerLink]="['/']">{{'blog.sub.Home' | translate}}</span></span>/ {{'search.title' |
                            translate}}</p>
                    </div>
                </div>
                
                <div class="buttons">
                    <div class="filter-button" (click)="changeFilter()">
                        <span> {{'Results.sub.Filters' | translate}} </span>
                        <fa-icon *ngIf="display === 'initial'" style="position: initial;" [icon]="faChevronUp" class="faChevronUp"></fa-icon>
                        <fa-icon *ngIf="display === 'none'" style="position: initial;" [icon]="faChevronDown" class="faChevronDown"></fa-icon>
                    </div>
                    <div class="col-md-2" style="position: relative; margin: 0% 1%; width: 100%;">
                        
                        <select #dropdownFilter class="_filter" (change)="filterBy(dropdownFilter.value)"
                            class="form-select form-select-lg mb-3 float-end" aria-label=".form-select-lg example">
                            <option value="">{{'Results.sub.filter by' | translate}}</option>
                            <option value="DESC">{{'Results.sub.PriceLow' | translate}}</option>
                            <option value="ASC">{{'Results.sub.PriceHigh' | translate}}</option>
                        </select>
                        <fa-icon [icon]="faFilter" class="faFilter"></fa-icon>
                    </div>
                </div>

            </div>

            <div class="search-filters" [ngStyle]="{'display': display}">
                <div  class="search-filters__box">

                    <div class="search-filters__filter city">
                        <angular2-multiselect [data]="dropdownListCity" [(ngModel)]="selectedItemCity" 
                        [settings]="settingsCity"
                        (onSelect)="onChangeCity($event)"
                        (onDeSelectAll)="onDeSelectAllCity()">
                        </angular2-multiselect>
                    </div>

                    <div class="search-filters__filter area">
                        <angular2-multiselect [data]="dropdownListArea" 
                            [(ngModel)]="selectedItemArea" 
                            [settings]="settingsArea" 
                            (onSelect)="onItemSelectArea($event)" (onDeSelect) =onItemDeSelectArea($event)
                            (onDeSelectAll)="onDeSelectAllArea()">
                        </angular2-multiselect>
                    </div>

                    <div class="search-filters__filter neighborhood">
                        <angular2-multiselect 
                        [data]="dropdownListNeighborhood" 
                        [(ngModel)]="selectedItemNeighborhood" 
                        [settings]="settingsNeigbhorhood"
                        (onSelect)="onItemSelectNeighborhood($event)"
                        (onDeSelect) =onItemDeSelectNeighborhood($event)>
                    </angular2-multiselect>
                    </div>

                    <div class="search-filters__filter estate_type">
                        <angular2-multiselect [data]="RealEstateType" [(ngModel)]="SelectedRealEstateType" 
                        [settings]="settingsUnitType"
                        (onSelect)="onItemSelectUnitType($event)">
                    </angular2-multiselect>
                    </div>
                    
                    <div class="search-filters__filter propose">
                        <ng-select [placeholder]="activeLang == 'ar' ? 'للبيع / للإيجار' :'For Sell / Rent'" class="_filter" [(ngModel)]="propose">
                            <ng-option [value]="'sell'">{{'home.Sell' | translate}}</ng-option>
                            <ng-option [value]="'rent'">{{'home.Rent' | translate}}</ng-option>
                        </ng-select>
                    </div>
                    
                    <div class="search-filters__filter rooms">
                        <ng-select [placeholder]="activeLang == 'ar' ? 'عدد الغرف' : 'Rooms count'" class="_filter" [(ngModel)]="bedroom">
                            <ng-option [value]="room.id" *ngFor="let room of bedroom_arr">{{activeLang == 'ar' ? room.name_ar : room.name_en}}</ng-option>
                          </ng-select>
                    </div>

                    <div class="search-filters__filter space">
                        <ng-select [placeholder]="activeLang == 'ar' ? 'المساحة' :'Space'" class="_filter" [(ngModel)]="space">
                            <ng-option [value]="space['id']" *ngFor="let space of space_arr">{{activeLang == 'ar' ? space['name_ar'] : space['name_en']}}</ng-option>
                        </ng-select>
                    </div>

                    <div class="search-filters__filter priceRange">
                        <div class="dropdown" ngbDropdown>
                            <button ngbDropdownToggle [class.dimmed]="(!priceMinRange && !priceMaxRange)" #dropdownMenuButton1
                                (click)="focusMinPriceInput()" class="btn dropdown-toggle setPriceBtn ngSelect-input" type="button"
                                id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                                style="display: flex; justify-content: space-between; align-items: center;">
                                {{setPricePlaceHolder()}}
                            
                                <!-- #c1bebe -->
                            <fa-icon style="position: initial; color: #949494"  [icon]="faChevronDown"></fa-icon>

                            </button>


                            <ul ngbDropdownMenu class="dropdown-menu" aria-labelledby="dropdownMenuButton1"
                                (click)="$event.stopPropagation()" style="overflow: hidden;">
                                <div class="row">
                                    <div class="col-6">
                                        <input (focus)="hideMaxRange=true;hideMinRange=false"
                                            (blur)="setMaxSelections(priceMinRange)" #minPrice 
                                            placeholder="{{'home.Min Price' | translate}}" [allowNegative]="false" type="text"
                                            ngxNumberFormat="#,###,###,###" />
                                    </div>
                                    <div class="col-6">
                                        <input (focus)="hideMinRange=true;hideMaxRange=false" #maxPrice
                                             placeholder="{{'home.Max Price' | translate}}"
                                            [allowNegative]="false" type="text" ngxNumberFormat="#,###,###,###" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <button [hidden]="hideMinRange" (click)="setMinValue(v.val)" class="select-price" *ngFor="let v of minPriceValue"
                                            >{{v.view}}</button>
                                            
                                    </div>
                                    <div class="col-6">
                                        <button [hidden]="hideMaxRange" class="select-price" *ngFor="let v of maxPriceValue"
                                            (click)="setMaxValue(v.val)">{{v.view}}</button>
                                    </div>
                                    <div class=" col-12">
                                        <div class="row">
                                            <div class="col foot">
        
                                                <button type="button" (click)="toggleDropdown()"
                                                    class="btn btn-done float-end">{{'button.actions.Done' |
                                                    translate}}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </div>

                    <div class="ngSelect compound" style="display: flex; align-items: center;">
                        <input
                            class="checkbox"
                            type="checkbox"
                            [checked]="checkboxVar"
                            [disabled]="true"
                            (change)="checkboxVar = !checkboxVar"/>
    
                        <div class="dropdown">
                            <div class="multiselect" style="pointer-events: none;" *ngIf="!checkboxVar">
                                <angular2-multiselect 
                                    [data]="dropdownListCompound" 
                                    [(ngModel)]="selectedItemCompound" 
                                    [settings]="settingsCompound"
                                    (onSelect)="onItemSelectCompound($event)"
                                    (onDeSelect) =onItemDeSelectCompound($event)>
                                </angular2-multiselect>
            
                            </div>
        
                            <div class="multiselect" *ngIf="checkboxVar">
                                <angular2-multiselect 
                                    [data]="dropdownListCompound" 
                                    [(ngModel)]="selectedItemCompound" 
                                    [settings]="settingsCompound"
                                    (onSelect)="onItemSelectCompound($event)"
                                    (onDeSelect) =onItemDeSelectCompound($event)>
                                </angular2-multiselect>
            
                            </div>
        
                            <span *ngIf="SelectedCompoundNotValid">{{'validation.This Filed Is Required!' | translate}}</span>
        
    
                        </div>
    
                    </div>
                
                </div>
                
                <button type="submit" (click)="quick_search()" class="btn button-success">{{'search_button' | translate}}</button>
               
            </div>
            
            <div class="row mt-3 results" *ngIf="results.length > 0">
                <div *ngFor="let item of results | paginate: { itemsPerPage: 18, currentPage: page,totalItems: total_search_count }" class="col-xs-12 col-sm-6 col-xl-4">
                    <div class="card mb-3">
                        <div class="row g-0 card-content">
                            <div class="col-12" style="position: relative;">
                                <span (click)="navigateToItemDetails(item)" class="overlay"></span>
                                <span style="cursor: pointer;" (click)="navigateToItemDetails(item)"
                                    class="bage">{{getPropose(item)}}</span>
                                <img *ngIf="item['isFavorite']" (click)="toggleFavorite(item)" class="fav"
                                    src="../../../../assets/images/Path 165 copy.png" alt="..." />
                                <img *ngIf="!item['isFavorite']" (click)="toggleFavorite(item)" class="fav"
                                    src="../../../../assets/images/Path 165.png" alt="..." />
                                <img style="cursor: pointer;height: 230px;" (click)="navigateToItemDetails(item)"
                                (auxclick)="openNewWindow($event, item)" src="{{setImagesSrc(item)}}" class="img-fluid" alt="...">
                            </div>
                            <div class="col-md-12">
                                <div class="card-body" style="cursor: pointer;" (click)="navigateToItemDetails(item)">
                                    <div class="row">
                                        <div class="col-12">
                                            <h6>
                                                {{ item['title'] }}
                                            </h6>

                                            <h5 class="card-title">
                                                {{'propertyDetails.EGP' | translate}}
                                                <!-- <br> -->
                                                {{ numberWithCommas(item['price'])}}
                                            </h5>
                                            
                                            <div class="space-between">

                                                <span class="location">
                                                    <img src="../../../../assets/images/noun_Location_1911856@2x.png"
                                                        alt="..." />
                                                    {{activeLang === 'en' ? item['area_name_en'] : item['area_name_ar']}}
                                                </span>


                                                <span class="date">
                                                    <img src="../../../../assets/images/date.png"
                                                        alt="..." />
                                                        {{ setDate(item['created_at']) }}
                                                </span>

                                            </div>
                                        </div>
                                        <!-- <div class="col-4 float-end" style="position: relative;">
                                            <nz-progress class="float-end" nzType="circle"
                                                [nzPercent]="getScore(item['score'])"
                                                [nzStrokeColor]="{ '0%': '#EC6666','50%':'#C175E8','70%':'#79D2DE', '100%': '#147AD6' }">
                                            </nz-progress>
                                            <span class="score">{{getScore(item['score'])}}%</span>
                                        </div> -->

                                    </div>
                                    <div class="card-text">
                                        <div class="space-between">
                                            <div class="desc" *ngFor="let c of item['criteria'] | slice:0:4">
                                                <img class="img-icon" src="{{getCriteriaImageSrc(c)}}" alt=".." />
                                                {{getCriteriaOptions(c)}}
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           
           
            <div *ngIf="results.length == 0 && isLoading">
                <div class="no-data">
                    <div class="no-data__icon">

                        <img src="../../assets/images/no-data.png"/>
                    </div>
                    <h4 style="color: #fd4965;margin:0;">{{'loading' | translate}}</h4>
                    <p>{{'loading_text' | translate}}</p>
                    
                </div>
            </div>

            <div *ngIf="results.length == 0 && !isLoading">
                <div class="no-data">
                    <div class="no-data__icon">

                        <img src="../../assets/images/no_results.jpg"/>
                    </div>
                    <h4 style="color: #fd4965;margin:0;">{{'no_results' | translate}}</h4>
                    <p>{{'no_results_text' | translate}}</p>
                    
                </div>
            </div>

            
            <!-- <div class="row justify-content-center" *ngIf="results.length && results.length < total_search_count">
                <button class="btn button-success more" (click)="showMore()">
                    <span *ngIf="!loadMore">{{'button.actions.More' | translate}}</span>
                    <span *ngIf="loadMore">
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="false"></span>
                        Loading...
                    </span>
                </button>

            </div> -->

        </div>

        <pagination-controls (pageChange)="onPageChange($event)" [(ngModel)]="page" ></pagination-controls>

    </div>
</div>

<div *ngIf="selected_country == 'saudi'" class="coming-soon">
    <img src="../../assets/images/logo-header.svg"/>
    <h1>{{'coming_soon' | translate}}</h1>
</div>