<div [hidden]="uploadingPhotos" class="container form-stepper">
    <form [formGroup]="stepForm" autocomplete="off" novalidate #formRef="ngForm">
        <div class="row">

                <!-- Title/Description -->
                <div class="col-lg-12 col-sm-12" 
                *ngFor="let criteria of filterTitleDescription(formData); let index = index;">
                    
                    {{ print(criteria, criteria) }}

                    <p class="title" [class.bordered-top]="index === 2 || index === 3 || index === 4">
                        <span *ngIf="criteria.name_en !== 'Unit Title' &&
                                    criteria.name_en !== 'Write a unique description'"> 
                            
                            <img [src]="getImageSrc(criteria.name_en,formData)"  alt="..."/></span>
                            {{getKeyName(criteria.name_en, formData)}}
                    </p>
                    
                    <div class="row" [class.bordered]="index === 0 || index === 2 || index === 4">
                        <ng-container
                        [ngTemplateOutlet]="getType(formData, criteria.name_en) === 'text' ?  text : large_text"                        
                        [ngTemplateOutletContext]="{key: index}">
                        </ng-container>
                    </div>
    

                    <ng-template #text let-key="key">
                        <div [formGroup]="stepForm" class="col-12 mb-3 input-group">
                            <!-- <span style="height:48px;background-color: #f7f7f7;color: #2c2c2c;"
                                class="input-group-text mt-3" id="inputGroup-sizing-default">{{getHelperText(criteria.name_en)}}</span> -->
                            <input [value]="getFormValue(criteria.name_en)" placeholder="{{'sell.Unit Title' | translate}}"
                                (keyup)="onInputNumberChange(criteria.name_en,$event)" style="height:48px; border-radius: 15px;" class="form-control mt-3"
                                type="text" min="0" />
                        </div>
                    </ng-template>

                    <ng-template #large_text let-key="key">
                        <div [formGroup]="stepForm" class="col-12 mb-3 input-group">
                            <!-- <span style="height:48px;background-color: #f7f7f7;color: #2c2c2c;"
                                class="input-group-text mt-3" id="inputGroup-sizing-default">{{getHelperText(criteria.name_en)}}</span> -->
                            <input [value]="getFormValue(criteria.name_en)" placeholder="{{'sell.Unit Description' | translate}}"
                                (keyup)="onInputNumberChange(criteria.name_en,$event)" style="height:96px; border-radius: 15px;" class="form-control mt-3"
                                type="text" min="0" />
                        </div>
                    </ng-template>
                </div>

                <!-- Others -->
                <div class="col-lg-6 col-sm-12" 
                *ngFor="let criteria of filterOther(formData); let index = index;">

                    
                    {{ print(criteria, criteria) }}

                    <p class="title" [class.bordered-top]="index === 2 || index === 3 || index === 4">
                        <span *ngIf="criteria.name_en !== 'Unit Title' &&
                                    criteria.name_en !== 'Write a unique description'"> 
                            
                            <img [src]="getImageSrc(criteria.name_en,formData)"  alt="..."/></span>
                            {{getKeyName(criteria.name_en, formData)}}
                    </p>
                    
                    <div class="row" [class.bordered]="index === 0 || index === 2 || index === 4">
                        <ng-container
                        [ngTemplateOutlet]="getType(formData, criteria.name_en) === 'dropdownSelect' ? dropdownSelect : 
                        getType(formData, criteria.name_en) === 'upload' ? imagesUpload : 
                        getType(formData, criteria.name_en) === 'inputNumber' ?  inputNumber : 
                        multiSelectCheckbox"                        
                        
                        [ngTemplateOutletContext]="{key: index}">
                        </ng-container>
                    </div>
                    
                    <ng-template #imagesUpload let-key="key">
                        <div class="imagesUpload">
                            <button *ngIf="!uploadingPhotos" (click)="uploadingPhotos = !uploadingPhotos;active = 0"
                                style="background-color: #184D471A;">
                                {{'sell.unit Photos' | translate}} <img
                                    src="../../../../assets/images/add-box-line.svg" alt="..."/></button>
                            <div class="row" *ngIf="imagesPreview() && !uploadingPhotos" style="position: relative;">
                                <img *ngFor="let item of imagesPreview();let index = index;" src="{{item}}"
                                    style="width: 70px; height: auto;height:70px; border-radius: 10px;margin-bottom: 10px;padding: 5px;" alt="..."/>
                            </div>
                        </div>
                    </ng-template>
                    
                    <ng-template #multiSelectCheckbox let-key="key">
                        <div class="col-6 mb-2"
                            *ngFor="let sValue of util.getFilteredValues(criteria.name_en,formData);let i = index;">
                            <input ng-change="false"
                                (change)="setupFormControlValue($event,criteria.name_en, sValue, checkIsSelected(criteria.name_en, sValue))"
                                mdbCheckbox type="checkbox" class="btn-check" [id]="criteria.name_en + i" autocomplete="off" />
                            <label [class.filled]="checkIsSelected(criteria.name_en, sValue) !== -1" class="btn btn-primary"
                                [for]="criteria.name_en + i">
                                {{activeLang === 'en' ? sValue.name_en : sValue.name_ar}}
                            </label>
                        </div>
                    </ng-template>

                    <ng-template #radioButton let-key="key">
                        <div class="col-6 mb-2 btn-group"
                            *ngFor="let sValue of util.getFilteredValues(criteria.name_en,formData);let i = index;">
                            <input mdbRadio type="radio" class="btn-check-" [id]="criteria.name_en + i" autocomplete="off"
                                [checked]="checkIsSelected(criteria.name_en, sValue.id) !== -1" [value]="sValue.id" />
                            <label [class.filled]="checkIsSelected(criteria.name_en, sValue.id) !== -1" class="btn btn-primary"
                                [for]="criteria.name_en + i">
                                {{activeLang === 'en' ? sValue.name_en : sValue.name_ar}}
                            </label>
                        </div>
                    </ng-template>
                    
                    <ng-template #dropdownSelect let-key="key">
                        <div class="col-6 mb-2"
                            *ngFor="let sValue of util.getFilteredValues(criteria.name_en,formData);let i = index;">
                            <input ng-change="false"
                                (change)="setSingleSelect($event,criteria.name_en, sValue, checkIsSelected(criteria.name_en, sValue))"
                                mdbCheckbox type="checkbox" class="btn-check" [id]="criteria.name_en + i" autocomplete="off" />
                            <label [class.filled]="checkIsSelected(criteria.name_en, sValue) !== -1" class="btn btn-primary"
                                [for]="criteria.name_en + i">
                                {{activeLang === 'en' ? sValue.name_en : sValue.name_ar}}
                            </label>
                        </div>
                    </ng-template>
                    
                    <ng-template #inputNumber let-key="key">
                        <div [formGroup]="stepForm" class="col-12 mb-3 input-group">
                            <!-- <span style="height:48px;background-color: #f7f7f7;color: #2c2c2c;"
                                class="input-group-text mt-3" id="inputGroup-sizing-default">{{getHelperText(criteria.name_en)}}</span> -->
                            <input [value]="getFormValue(criteria.name_en)" placeholder="{{'sell.Enter value' | translate}}"
                                (keyup)="onInputNumberChange(criteria.name_en,$event)" style="height:48px" class="form-control mt-3"
                                type="number" min="0" />
                        </div>
                    </ng-template>

                </div>
            </div>
    </form>

</div>


<div [hidden]="!uploadingPhotos" class="photos-uploader">
    <form [formGroup]="imagesForm" autocomplete="off" novalidate #formRef="ngForm">
        <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs nav-pills">
            <p style="width: 100%;padding: 15px;">{{'sell.photoUpload.Select category' | translate}}</p>
            <li ngbNavItem *ngFor="let ctrl of imagesForm.controls | keyvalue;let index = index;" [ngbNavItem]="index"
                class="mb-2">
                <a class="tab-head" #index ngbNavLink>{{keyTranslate(ctrl.key, imgTags)}}</a>
                <ng-template ngbNavContent>
                    <div class="row content">
                        <p class="pt-5" style="text-align: center;">{{'sell.photoUpload.Add photo for the' | translate}}
                            {{keyTranslate(ctrl.key,
                            imgTags)}}</p>
                        <img (click)="file.click()" *ngIf="!myFilesPreview[ctrl.key]?.length" class="mb-2"
                            style="width: 154px;margin: auto;display: block;cursor: pointer;"
                            src="../../../../assets/images/photo__.svg" alt="..."/>
                        <div class="row" *ngIf="myFilesPreview[ctrl.key]?.length">
                            <div class="col-sm-12 col-md-6 mb-3"
                                *ngFor="let item of myFilesPreview[ctrl.key];let index = index;"
                                style="position: relative;">
                                <img src="{{item}}" style="width: 100%; height: auto;height:250px;" alt="..."/>
                                <span style="position: absolute;
                            right: 20px;
                            top: 8px;
                            background-color: #FFFFFF;
                            width: 25px;
                            text-align: center;
                            border-radius: 50%;
                            height: 25px;
                            cursor: pointer;" (click)="deleteImg(ctrl.key, index)">
                                    <fa-icon style="font-size: 13px;" [icon]="faTimes" class="user-faTimes"></fa-icon>
                                </span>
                            </div>
                        </div>
                        <input hidden #file type="file" name="myFile" accept="image/png,image/jpeg"
                            (change)="fileEvent($event,ctrl.key)" value="" multiple />
                        <div class="row justify-content-center button-row">
                            <button (click)="file.click()">
                                <img src="../../../../assets/images/photo_.svg" width="20px" alt="..."/> {{'sell.photoUpload.add
                                images' | translate}}</button>
                            <button (click)="next()" class="done">
                                {{'button.actions.Done' | translate}}</button>
                        </div>
                    </div>
                </ng-template>
            </li>
            <!-- <li ngbNavItem>
              <a ngbNavLink>Second</a>
              <ng-template ngbNavContent>Second content</ng-template>
            </li> -->
        </ul>
        <div [ngbNavOutlet]="nav"></div>
        <!-- <div class="col-lg-6 col-sm-12" *ngFor="let ctrl of imagesForm.controls | keyvalue;let index = index;">
            dd
        </div> -->
    </form>
    <!-- <app-photos-uploader></app-photos-uploader> -->
</div>