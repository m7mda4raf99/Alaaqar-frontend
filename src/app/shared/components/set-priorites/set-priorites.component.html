<div class="container--fluid set-priorities">
    <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="rgba(0, 0, 0, 0.0)"   [fullScreen]="true">
        <img class="spinner-img" style='animation:flip-with-scale 3s infinite;position: relative;top:-100px;' src='../../assets/images/logo-loader.png'/>
    </ngx-spinner>   
    <div class="head">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-xs-12 col-md-10 ">
                    <p class="title"> {{'setPriorities.Set Priorities' | translate}}</p>
                    <p class="sm-title"><span class="home-tab" [routerLink]="['/']">{{'setPriorities.Home' | translate}}</span> <span>/ {{'setPriorities.Buy a home' | translate}}</span></p>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row justify-content-center priorites-row" style="background-color: #F7F7F7;">
            <div class="col-xs-12 col-xl-10 main-content">
                <div class="row">
                    <div class="col-xs-12 col-xl-8 priorites-list order-1 order-xl-0">
                        <div class="mt-3 main">
                           <div class="row justify-content-center">
                            <div class="col-10">
                                <p>{{'setPriorities.Set your priorities and drag and drop them from left to right' | translate}}</p>
                            </div>
                           </div>
                            <div class="row justify-content-center">
                                <div class="col-6 col-md-4 col-lg-5 col-xl-2 mt-3 custom-element" *ngFor="let item of criteria" [class.selected]="item.selected === true">
                                    <div class="box" (click)="setItem(item)">
                                        <span class="icon">
                                            <img *ngIf='item.selected === false' src="{{baseUrl + item.icon}}" alt="..."/>
                                        </span>
                                        <span class="text">
                                            {{activeLang === 'en' ?  item.name_en :  item.name_ar}}
                                        </span>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="col-xs-12 col-xl-4 priorites-control order-0 order-xl-1">
                        
                        <div class="col mt-3">
                            <!-- <p class="text-head">Results Accuracy</p>
                            <p class="text-desc">
                                Based on selected Priorities, your results will match your choices by 76%
                            </p> -->
                            <ngb-accordion #myaccordion="ngbAccordion" (panelChange)="beforeChange($event)" [closeOthers]="true" activeIds="{{activeIds}}">
                                <ngb-panel id="tab-1" title="">
                                    <ng-template ngbPanelTitle>
                                        <b style="width: 95%;display: inline-block;">{{ activeLang === 'en' ? priorities[0]?.name_en : priorities[0]?.name_ar }}</b> 
                                         <fa-icon class="up" [icon]="faChevronUp"></fa-icon> 
                                         <fa-icon class="down" [icon]="faChevronDown"></fa-icon> 
                                    </ng-template>
                                    <ng-template ngbPanelContent>
                                      <p class="hint">{{'setPriorities.You can remove or add up to 5 items' | translate}}</p>
                                    <div class="row justify-content-center">
                                        <div *ngFor="let item of prioritiesList['1']" class="col-xs-6 col-sm-4  mt-3">
                                            <div class="box" *ngIf='item.selected === true'>
                                                <span class="icon">
                                                    <span class="delete" (click)="deleteItem(item)">
                                                        <fa-icon [icon]="faTimes"></fa-icon>
                                                    </span>
                                                    <img  src="{{baseUrl + item.icon}}" alt="..."/>
                                                </span>
                                                <span class="text">
                                                    {{ activeLang === 'en' ? item.name_en : item.name_ar}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                  </ng-template>
                                </ngb-panel>
                                <ngb-panel [disabled]="disableTab2" id="tab-2">
                                    <ng-template ngbPanelTitle>
                                        <b style="width: 95%;display: inline-block;">{{activeLang === 'en' ? priorities[1]?.name_en : priorities[1]?.name_ar}}</b> 
                                         <fa-icon class="up" [icon]="faChevronUp"></fa-icon> 
                                         <fa-icon class="down" [icon]="faChevronDown"></fa-icon> 
                                    </ng-template>
                                  <ng-template ngbPanelContent>
                                    <div class="row justify-content-center">
                                        <p class="hint">{{'setPriorities.You can remove or add up to 5 items' | translate}}</p>
                                        <div *ngFor="let item of prioritiesList['2']" class="col-6 col-xl-4 mt-3">
                                            <div class="box"  *ngIf='item.selected === true'>
                                                <span class="icon">
                                                    <span class="delete" (click)="deleteItem(item)">
                                                        <fa-icon [icon]="faTimes"></fa-icon>
                                                    </span>
                                                    <img src="{{baseUrl + item.icon}}" alt="..."/>
                                                </span>
                                                <span class="text">
                                                    {{ activeLang === 'en' ? item.name_en : item.name_ar}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                  </ng-template>
                                </ngb-panel>
                                <ngb-panel [disabled]="disableTab3" id="tab-3">
                                    <ng-template ngbPanelTitle>
                                        <b style="width: 95%;display: inline-block;">{{activeLang === 'en' ? priorities[2]?.name_en : priorities[2]?.name_ar}}</b> 
                                         <fa-icon class="up" [icon]="faChevronUp"></fa-icon> 
                                         <fa-icon class="down" [icon]="faChevronDown"></fa-icon> 
                                    </ng-template>
                                  <ng-template ngbPanelContent>
                                    <div class="row justify-content-center">
                                        <p class="hint">{{'setPriorities.You can remove or add up to 5 items' | translate}}</p>
                                        <div *ngFor="let item of prioritiesList['3']" class="col-6 col-xl-4 mt-3">
                                            <div class="box" *ngIf='item.selected === true'>
                                                <span class="icon">
                                                    <span class="delete" (click)="deleteItem(item)">
                                                        <fa-icon [icon]="faTimes"></fa-icon>
                                                    </span>
                                                    <img src="{{baseUrl + item.icon}}" alt="..."/>
                                                </span>
                                                <span class="text">
                                                    {{ activeLang === 'en' ? item.name_en : item.name_ar}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                  </ng-template>
                                </ngb-panel>
                                <ngb-panel [disabled]="disableTab4" id="tab-4">
                                    <ng-template ngbPanelTitle>
                                        <b style="width: 95%;display: inline-block;">{{activeLang === 'en' ? priorities[3]?.name_en : priorities[3]?.name_ar}}</b> 
                                         <fa-icon class="up" [icon]="faChevronUp"></fa-icon> 
                                         <fa-icon class="down" [icon]="faChevronDown"></fa-icon> 
                                    </ng-template>
                                    <ng-template ngbPanelContent>
                                        <div class="row justify-content-center">
                                            <p class="hint">{{'setPriorities.You can remove or add up to 5 items' | translate}}</p>
                                            <div *ngFor="let item of prioritiesList['4']" class="col-6 col-xl-4 mt-3">
                                                <div class="box"  *ngIf='item.selected === true'>
                                                    <span class="icon">
                                                        <span class="delete" (click)="deleteItem(item)">
                                                            <fa-icon [icon]="faTimes"></fa-icon>
                                                        </span>
                                                        <img  src="{{baseUrl + item.icon}}" alt="..."/>
                                                    </span>
                                                    <span class="text">
                                                        {{ activeLang === 'en' ? item.name_en : item.name_ar}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                  </ngb-panel>
                              </ngb-accordion>
                            </div>
                            <button [disabled]='validateNext()' style="display: block;max-width: 100%;width: 100%;" class="btn button-success more" (click)="doSearch()">{{'setPriorities.Set Priorities' | translate}}</button>
                    </div>

                </div>

            </div>
        </div>

    </div>
</div>